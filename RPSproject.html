<!DOCTYPE html>

<html>
    <head>
        <title>RPS</title>
    </head>
    <body>
        <p>ROCK PAPER SCISSOR</p>
        <button onclick="
            RPS('Rock')
        ">Rock</button>
        <button onclick="
            RPS('Paper')
        ">Paper</button>
        <button onclick="
            RPS('Scissor')
        ">Scissor</button>

        <p class="jsResult">Result: </p>
        <p class="jsmove">Your move-  ---  - computer move</p>
        <p class="jsScore"></p>

        <button onclick="
            reset()
            
        ">reset score</button>

        <script>
            let score=JSON.parse(localStorage.getItem(`score`))||{
                win: 0,
                loss: 0,
                tie: 0,
            }

            function updatescore(){
                score=JSON.parse(localStorage.getItem(`score`))||{
                    win: 0,
                    loss: 0,
                    tie: 0,
                }
                document.querySelector('.jsScore')
                .innerHTML =` Win:${score.win} Loss:${score.loss} tie:${score.tie}`
            }
            function reset(){
                
                localStorage.removeItem(`score`); 
                
                document.querySelector(`.jsResult`)
                        .innerHTML = `Result: `
                
                document.querySelector(`.jsmove`)
                    .innerHTML = `Your move-  ---  - computer move`
                
                updatescore();

            }


            function RPS(playermove){
                const randomnumber = Math.random();

                let computermove ='';
                let result='';


                if(randomnumber<=1/3)
                {
                    computermove = 'Rock';
                }
                else if(randomnumber<=2/3){
                    computermove = 'Paper';
                }
                else{
                    computermove = 'Scissor';
                }
                if(playermove==='Rock'){

                    if(computermove==='Rock'){
                    
                        result= 'tie';
                        score.tie++;

                    }
                    else if(computermove==='Paper'){
                        result='loss';
                        score.loss++;
                    }
                    else if(computermove === 'Scissor'){
                        result='win';
                        score.win++;
                    }
                    
                }
                else if(playermove==='Paper'){
                    if(computermove==='Rock'){
                        result= 'win';
                        score.win++;
                    }
                    else if(computermove==='Paper'){
                        result='tie';
                        score.tie++;
                    }
                    else if(computermove === 'Scissor'){
                        result='loss';
                        score.loss++;
                    }
                    
                }
                else if(playermove==='Scissor'){
                    if(computermove==='Rock'){
                        result= 'loss';
                        score.loss++
                    }
                    else if(computermove==='Paper'){
                        result='win';
                        score.win++;
                    }
                    else if(computermove === 'Scissor'){
                        result='tie';
                        score.tie++;
                    }
                }
                localStorage.setItem('score',JSON.stringify(score));

                document.querySelector(`.jsResult`)
                    .innerHTML = `Result: ${result}.`
                
                document.querySelector(`.jsmove`)
                    .innerHTML = `Your move-${playermove} --- ${computermove} - computer move`
                updatescore();

            };
            updatescore();

        </script>
    </body>
</html>